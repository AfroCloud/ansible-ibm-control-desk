---
# tasks file for ibm-db2-install
- name:             Disable SELinux
  selinux:
    state:          disabled
- 
  name:             Insert data to ulimit
  blockinfile:
    path:           /etc/security/limits.conf 
    block: |
      *         hard    nofile      999999
      *         soft    nofile      999999
      root      hard    nofile      999999
      root      soft    nofile      999999
- 
  name:             Reboot to apply changes
  reboot:
- 
  name:             Generate Response file
  template:
    src:            "{{ __tpl_file }}"
    dest:           "{{ __tmp_dir }}/{{ __rsp_file }}"
    mode:           '0755'
- 
  name:             Install IBM DB2
  command:          './imcl -input {{ __tmp_dir }}/{{ __rsp_file }} -log db2file -acceptLicense'
  args:
    chdir:          '{{ __iim_install_location }}/eclipse/tools/'